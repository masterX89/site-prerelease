(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[29],{

/***/ "./node_modules/css-loader/dist/cjs.js?!./node_modules/less-loader/dist/cjs.js?!./src/pages/login/style/index.module.less":
/*!****************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js??ref--11-1!./node_modules/less-loader/dist/cjs.js??ref--11-2!./src/pages/login/style/index.module.less ***!
  \****************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, ".container-1698e8bbcc {\n  display: flex;\n  height: 100vh;\n}\n.container-1698e8bbcc .banner-34d8fb0ed3 {\n  width: 550px;\n  background: linear-gradient(163.85deg, #1d2129 0%, #00308f 100%);\n}\n.container-1698e8bbcc .content-d833bcea62 {\n  flex: 1;\n  position: relative;\n  padding-bottom: 40px;\n}\n.container-1698e8bbcc .footer-428ab1b8de {\n  width: 100%;\n  position: absolute;\n  bottom: 0;\n  right: 0;\n}\n.logo-2cacee0b12 {\n  position: fixed;\n  top: 24px;\n  left: 22px;\n  display: inline-flex;\n  align-items: center;\n  z-index: 1;\n}\n.logo-text-e6b1096483 {\n  margin-left: 4px;\n  margin-right: 4px;\n  font-size: 20px;\n  color: var(--color-fill-1);\n}\n.banner-34d8fb0ed3 {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.banner-inner-15d806a038 {\n  height: 100%;\n  flex: 1;\n}\n.content-d833bcea62 {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.carousel-280dec1d64 {\n  height: 100%;\n}\n.carousel-item-b3bfcd1cb4 {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n}\n.carousel-title-b9020ae137 {\n  font-weight: 500;\n  font-size: 20px;\n  line-height: 28px;\n  color: var(--color-fill-1);\n}\n.carousel-sub-title-0a3647c462 {\n  margin-top: 8px;\n  font-size: 14px;\n  line-height: 22px;\n  color: var(--color-text-3);\n}\n.carousel-image-f4b6dfc4a2 {\n  margin-top: 30px;\n  width: 320px;\n}\n.login-form-wrapper-6e015bff61 {\n  width: 320px;\n}\n.login-form-title-c39cc7407c {\n  font-size: 24px;\n  font-weight: 500;\n  color: var(--color-text-1);\n  line-height: 32px;\n}\n.login-form-sub-title-4812f40eb5 {\n  font-size: 16px;\n  line-height: 24px;\n  color: var(--color-text-3);\n}\n.login-form-error-msg-88f4808d1a {\n  height: 32px;\n  line-height: 32px;\n  color: rgb(var(--red-6));\n}\n.login-form-password-actions-bd6092da32 {\n  display: flex;\n  justify-content: space-between;\n}\n.login-form-register-btn-25ece79dd8 {\n  color: var(--color-text-3) !important;\n}\n", ""]);
// Exports
exports.locals = {
	"container": "container-1698e8bbcc",
	"banner": "banner-34d8fb0ed3",
	"content": "content-d833bcea62",
	"footer": "footer-428ab1b8de",
	"logo": "logo-2cacee0b12",
	"logo-text": "logo-text-e6b1096483",
	"banner-inner": "banner-inner-15d806a038",
	"carousel": "carousel-280dec1d64",
	"carousel-item": "carousel-item-b3bfcd1cb4",
	"carousel-title": "carousel-title-b9020ae137",
	"carousel-sub-title": "carousel-sub-title-0a3647c462",
	"carousel-image": "carousel-image-f4b6dfc4a2",
	"login-form-wrapper": "login-form-wrapper-6e015bff61",
	"login-form-title": "login-form-title-c39cc7407c",
	"login-form-sub-title": "login-form-sub-title-4812f40eb5",
	"login-form-error-msg": "login-form-error-msg-88f4808d1a",
	"login-form-password-actions": "login-form-password-actions-bd6092da32",
	"login-form-register-btn": "login-form-register-btn-25ece79dd8"
};
module.exports = exports;


/***/ }),

/***/ "./src/pages/login/form.tsx":
/*!**********************************!*\
  !*** ./src/pages/login/form.tsx ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return LoginForm; });
/* harmony import */ var _arco_design_web_react_es_Space_style__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @arco-design/web-react/es/Space/style */ "./node_modules/@arco-design/web-react/es/Space/style/index.js");
/* harmony import */ var _arco_design_web_react_es_Space__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @arco-design/web-react/es/Space */ "./node_modules/@arco-design/web-react/es/Space/index.js");
/* harmony import */ var _arco_design_web_react_es_Button_style__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @arco-design/web-react/es/Button/style */ "./node_modules/@arco-design/web-react/es/Button/style/index.js");
/* harmony import */ var _arco_design_web_react_es_Button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @arco-design/web-react/es/Button */ "./node_modules/@arco-design/web-react/es/Button/index.js");
/* harmony import */ var _arco_design_web_react_es_Link_style__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @arco-design/web-react/es/Link/style */ "./node_modules/@arco-design/web-react/es/Link/style/index.js");
/* harmony import */ var _arco_design_web_react_es_Link__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @arco-design/web-react/es/Link */ "./node_modules/@arco-design/web-react/es/Link/index.js");
/* harmony import */ var _arco_design_web_react_es_Checkbox_style__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @arco-design/web-react/es/Checkbox/style */ "./node_modules/@arco-design/web-react/es/Checkbox/style/index.js");
/* harmony import */ var _arco_design_web_react_es_Checkbox__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @arco-design/web-react/es/Checkbox */ "./node_modules/@arco-design/web-react/es/Checkbox/index.js");
/* harmony import */ var _arco_design_web_react_icon_react_icon_IconLock__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @arco-design/web-react/icon/react-icon/IconLock */ "./node_modules/@arco-design/web-react/icon/react-icon/IconLock/index.js");
/* harmony import */ var _arco_design_web_react_es_Form_style__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @arco-design/web-react/es/Form/style */ "./node_modules/@arco-design/web-react/es/Form/style/index.js");
/* harmony import */ var _arco_design_web_react_es_Form__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @arco-design/web-react/es/Form */ "./node_modules/@arco-design/web-react/es/Form/index.js");
/* harmony import */ var _arco_design_web_react_es_Input_style__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @arco-design/web-react/es/Input/style */ "./node_modules/@arco-design/web-react/es/Input/style/index.js");
/* harmony import */ var _arco_design_web_react_es_Input__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @arco-design/web-react/es/Input */ "./node_modules/@arco-design/web-react/es/Input/index.js");
/* harmony import */ var _arco_design_web_react_icon_react_icon_IconUser__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @arco-design/web-react/icon/react-icon/IconUser */ "./node_modules/@arco-design/web-react/icon/react-icon/IconUser/index.js");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "./node_modules/@babel/runtime/helpers/slicedToArray.js");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! axios */ "./node_modules/axios/index.js");
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var _style_index_module_less__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./style/index.module.less */ "./src/pages/login/style/index.module.less");
/* harmony import */ var _style_index_module_less__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(_style_index_module_less__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var _history__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../history */ "./src/history.ts");















var _jsxFileName = "/mnt/e/workspace/hello-arco-pro/src/pages/login/form.tsx";




function LoginForm() {
  var formRef = Object(react__WEBPACK_IMPORTED_MODULE_15__["useRef"])();

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_15__["useState"])(''),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_14___default()(_useState, 2),
      errorMessage = _useState2[0],
      setErrorMessage = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_15__["useState"])(false),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_14___default()(_useState3, 2),
      loading = _useState4[0],
      setLoading = _useState4[1];

  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_15__["useState"])(false),
      _useState6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_14___default()(_useState5, 2),
      rememberPassword = _useState6[0],
      setRememberPassword = _useState6[1];

  function afterLoginSuccess(params) {
    // 记住密码
    if (rememberPassword) {
      localStorage.setItem('loginParams', JSON.stringify(params));
    } else {
      localStorage.removeItem('loginParams');
    } // 记录登录状态


    localStorage.setItem('userStatus', 'login'); // 跳转首页

    window.location.href = _history__WEBPACK_IMPORTED_MODULE_18__["default"].createHref({
      pathname: '/'
    });
  }

  function login(params) {
    setErrorMessage('');
    setLoading(true);
    axios__WEBPACK_IMPORTED_MODULE_16___default.a.post('/api/user/login', params).then(function (res) {
      var _res$data = res.data,
          status = _res$data.status,
          msg = _res$data.msg;

      if (status === 'ok') {
        afterLoginSuccess(params);
      } else {
        setErrorMessage(msg || '登录出错，请刷新重试');
      }
    })["finally"](function () {
      setLoading(false);
    });
  }

  function onSubmitClick() {
    formRef.current.validate().then(function (values) {
      login(values);
    });
  } // 读取 localStorage，设置初始值


  Object(react__WEBPACK_IMPORTED_MODULE_15__["useEffect"])(function () {
    var params = localStorage.getItem('loginParams');
    var rememberPassword = !!params;
    setRememberPassword(rememberPassword);

    if (formRef.current && rememberPassword) {
      var parseParams = JSON.parse(params);
      formRef.current.setFieldsValue(parseParams);
    }
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement("div", {
    className: _style_index_module_less__WEBPACK_IMPORTED_MODULE_17___default.a['login-form-wrapper'],
    __source: {
      fileName: _jsxFileName,
      lineNumber: 66,
      columnNumber: 5
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement("div", {
    className: _style_index_module_less__WEBPACK_IMPORTED_MODULE_17___default.a['login-form-title'],
    __source: {
      fileName: _jsxFileName,
      lineNumber: 67,
      columnNumber: 7
    }
  }, "\u767B\u5F55 Arco Design Pro"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement("div", {
    className: _style_index_module_less__WEBPACK_IMPORTED_MODULE_17___default.a['login-form-sub-title'],
    __source: {
      fileName: _jsxFileName,
      lineNumber: 68,
      columnNumber: 7
    }
  }, "\u767B\u5F55 Arco Design Pro"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement("div", {
    className: _style_index_module_less__WEBPACK_IMPORTED_MODULE_17___default.a['login-form-error-msg'],
    __source: {
      fileName: _jsxFileName,
      lineNumber: 69,
      columnNumber: 7
    }
  }, errorMessage), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement(_arco_design_web_react_es_Form__WEBPACK_IMPORTED_MODULE_10__["default"], {
    className: _style_index_module_less__WEBPACK_IMPORTED_MODULE_17___default.a['login-form'],
    layout: "vertical",
    ref: formRef,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 70,
      columnNumber: 7
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement(_arco_design_web_react_es_Form__WEBPACK_IMPORTED_MODULE_10__["default"].Item, {
    field: "userName",
    rules: [{
      required: true,
      message: '用户名不能为空'
    }],
    __source: {
      fileName: _jsxFileName,
      lineNumber: 71,
      columnNumber: 9
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement(_arco_design_web_react_es_Input__WEBPACK_IMPORTED_MODULE_12__["default"], {
    prefix: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement(_arco_design_web_react_icon_react_icon_IconUser__WEBPACK_IMPORTED_MODULE_13__["default"], {
      __source: {
        fileName: _jsxFileName,
        lineNumber: 72,
        columnNumber: 26
      }
    }),
    placeholder: "\u7528\u6237\u540D\uFF1Aadmin",
    onPressEnter: onSubmitClick,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 72,
      columnNumber: 11
    }
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement(_arco_design_web_react_es_Form__WEBPACK_IMPORTED_MODULE_10__["default"].Item, {
    field: "password",
    rules: [{
      required: true,
      message: '密码不能为空'
    }],
    __source: {
      fileName: _jsxFileName,
      lineNumber: 74,
      columnNumber: 9
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement(_arco_design_web_react_es_Input__WEBPACK_IMPORTED_MODULE_12__["default"].Password, {
    prefix: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement(_arco_design_web_react_icon_react_icon_IconLock__WEBPACK_IMPORTED_MODULE_8__["default"], {
      __source: {
        fileName: _jsxFileName,
        lineNumber: 76,
        columnNumber: 21
      }
    }),
    placeholder: "\u5BC6\u7801\uFF1Aadmin",
    onPressEnter: onSubmitClick,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 75,
      columnNumber: 11
    }
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement(_arco_design_web_react_es_Space__WEBPACK_IMPORTED_MODULE_1__["default"], {
    size: 16,
    direction: "vertical",
    __source: {
      fileName: _jsxFileName,
      lineNumber: 81,
      columnNumber: 9
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement("div", {
    className: _style_index_module_less__WEBPACK_IMPORTED_MODULE_17___default.a['login-form-password-actions'],
    __source: {
      fileName: _jsxFileName,
      lineNumber: 82,
      columnNumber: 11
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement(_arco_design_web_react_es_Checkbox__WEBPACK_IMPORTED_MODULE_7__["default"], {
    checked: rememberPassword,
    onChange: setRememberPassword,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 83,
      columnNumber: 13
    }
  }, "\u8BB0\u4F4F\u5BC6\u7801"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement(_arco_design_web_react_es_Link__WEBPACK_IMPORTED_MODULE_5__["default"], {
    __source: {
      fileName: _jsxFileName,
      lineNumber: 86,
      columnNumber: 13
    }
  }, "\u5FD8\u8BB0\u5BC6\u7801\uFF1F")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement(_arco_design_web_react_es_Button__WEBPACK_IMPORTED_MODULE_3__["default"], {
    type: "primary",
    "long": true,
    onClick: onSubmitClick,
    loading: loading,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 88,
      columnNumber: 11
    }
  }, "\u767B\u5F55"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement(_arco_design_web_react_es_Button__WEBPACK_IMPORTED_MODULE_3__["default"], {
    type: "text",
    "long": true,
    className: _style_index_module_less__WEBPACK_IMPORTED_MODULE_17___default.a['login-form-register-btn'],
    __source: {
      fileName: _jsxFileName,
      lineNumber: 91,
      columnNumber: 11
    }
  }, "\u6CE8\u518C\u8D26\u53F7"))));
}

/***/ }),

/***/ "./src/pages/login/style/index.module.less":
/*!*************************************************!*\
  !*** ./src/pages/login/style/index.module.less ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var api = __webpack_require__(/*! ../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
            var content = __webpack_require__(/*! !../../../../node_modules/css-loader/dist/cjs.js??ref--11-1!../../../../node_modules/less-loader/dist/cjs.js??ref--11-2!./index.module.less */ "./node_modules/css-loader/dist/cjs.js?!./node_modules/less-loader/dist/cjs.js?!./src/pages/login/style/index.module.less");

            content = content.__esModule ? content.default : content;

            if (typeof content === 'string') {
              content = [[module.i, content, '']];
            }

var options = {};

options.insert = "head";
options.singleton = false;

var update = api(content, options);



module.exports = content.locals || {};

/***/ })

}]);
//# sourceMappingURL=29.min.js.map