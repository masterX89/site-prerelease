{"version":3,"file":"128.min.js","sources":["webpack:///./src/pages/multi-dimension-data-analysis/utils/map.ts"],"sourcesContent":["import * as turf from '@turf/turf';\nexport function keepMapRatio(mapData, c, _) {\n  if (mapData && turf) {\n    // 获取数据外接矩形，计算宽高比\n    var bbox = turf.bbox(mapData);\n    var width = bbox[2] - bbox[0];\n    var height = bbox[3] - bbox[1];\n    var ratio = height / width;\n    var cWidth = c.width;\n    var cHeight = c.height;\n    var cRatio = cHeight / cWidth;\n    var scale;\n\n    if (cRatio >= ratio) {\n      var halfDisRatio = (cRatio - ratio) / 2 / cRatio;\n      scale = {\n        x: {\n          range: [0, 1]\n        },\n        y: {\n          range: [halfDisRatio, 1 - halfDisRatio]\n        }\n      };\n    } else {\n      var _halfDisRatio = (1 / cRatio - 1 / ratio) / 2 * cRatio;\n\n      scale = {\n        y: {\n          range: [0, 1]\n        },\n        x: {\n          range: [_halfDisRatio, 1 - _halfDisRatio]\n        }\n      };\n    }\n\n    var curScaleXRange = c.getScaleByField('x').range;\n    var curScaleYRange = c.getScaleByField('y').range;\n\n    if (curScaleXRange[0] !== scale.x.range[0] || curScaleXRange[1] !== scale.x.range[1] || curScaleYRange[0] !== scale.y.range[0] || curScaleYRange[1] !== scale.y.range[1]) {\n      setTimeout(function () {\n        c.scale(scale);\n        c.render(true);\n      }, 1);\n    }\n  }\n}"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}