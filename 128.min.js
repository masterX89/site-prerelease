(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[128],{

/***/ "./src/pages/multi-dimension-data-analysis/utils/map.ts":
/*!**************************************************************!*\
  !*** ./src/pages/multi-dimension-data-analysis/utils/map.ts ***!
  \**************************************************************/
/*! exports provided: keepMapRatio */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "keepMapRatio", function() { return keepMapRatio; });
/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @turf/turf */ "./node_modules/@turf/turf/turf.min.js");
/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_turf_turf__WEBPACK_IMPORTED_MODULE_0__);

function keepMapRatio(mapData, c, _) {
  if (mapData && _turf_turf__WEBPACK_IMPORTED_MODULE_0__) {
    // 获取数据外接矩形，计算宽高比
    var bbox = _turf_turf__WEBPACK_IMPORTED_MODULE_0__["bbox"](mapData);
    var width = bbox[2] - bbox[0];
    var height = bbox[3] - bbox[1];
    var ratio = height / width;
    var cWidth = c.width;
    var cHeight = c.height;
    var cRatio = cHeight / cWidth;
    var scale;

    if (cRatio >= ratio) {
      var halfDisRatio = (cRatio - ratio) / 2 / cRatio;
      scale = {
        x: {
          range: [0, 1]
        },
        y: {
          range: [halfDisRatio, 1 - halfDisRatio]
        }
      };
    } else {
      var _halfDisRatio = (1 / cRatio - 1 / ratio) / 2 * cRatio;

      scale = {
        y: {
          range: [0, 1]
        },
        x: {
          range: [_halfDisRatio, 1 - _halfDisRatio]
        }
      };
    }

    var curScaleXRange = c.getScaleByField('x').range;
    var curScaleYRange = c.getScaleByField('y').range;

    if (curScaleXRange[0] !== scale.x.range[0] || curScaleXRange[1] !== scale.x.range[1] || curScaleYRange[0] !== scale.y.range[0] || curScaleYRange[1] !== scale.y.range[1]) {
      setTimeout(function () {
        c.scale(scale);
        c.render(true);
      }, 1);
    }
  }
}

/***/ })

}]);
//# sourceMappingURL=128.min.js.map